(this["webpackJsonpcovid-frontend"]=this["webpackJsonpcovid-frontend"]||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},23:function(e,t,n){},26:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a,r,c,o,s,i,u,l,m=n(0),f=n.n(m),p=n(13),h=n.n(p),d=(n(23),n(15)),y=n(3),b=n.n(y),v=n(5),g=n(6),j=n(9),C=n(10),E=n(4),O=n(17),w=n(16),k=n(7),N=(n(25),n(26),new(function(){function e(){Object(j.a)(this,e),this.path="https://api.covid19api.com"}return Object(C.a)(e,[{key:"countries",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.path,"/countries"),{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"activeCases",value:function(){var e=Object(v.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.path,"/country/").concat(t,"?from=").concat(n.from,"&to=").concat(n.to),{method:"get"});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}())),S=n(1),D=n(14),M=n(8),x=n.n(M),B=Object(D.a)((r=function(e){Object(O.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,r=new Array(a),m=0;m<a;m++)r[m]=arguments[m];return e=t.call.apply(t,[this].concat(r)),Object(g.a)(e,"countries",c,Object(E.a)(e)),Object(g.a)(e,"selectedCountry",o,Object(E.a)(e)),Object(g.a)(e,"casesByCountry",s,Object(E.a)(e)),Object(g.a)(e,"loading",i,Object(E.a)(e)),Object(g.a)(e,"isFetchingStats",u,Object(E.a)(e)),e.setDocumentTitle=function(e){document.title="Stats for ".concat(e)},e.fetchStatsByCountry=function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(S.n)((function(){e.isFetchingStats=!0})),a={from:x()().clone().subtract(5,"day").format("YYYY-MM-DDT[00:00:00Z]"),to:x()().clone().format("YYYY-MM-DDT[00:00:00Z]")},t.next=4,N.activeCases(n,a);case 4:e.casesByCountry=t.sent,e.setDocumentTitle(e.selectedCountry),window.localStorage.setItem("country",e.selectedCountry),Object(S.n)((function(){e.isFetchingStats=!1}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Object(g.a)(e,"onSelectCountry",l,Object(E.a)(e)),e}return Object(C.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCountries();case 2:(t=this.countries.find((function(e){return"kyrgyzstan"===e.Slug})))&&(this.selectedCountry=window.localStorage.getItem("country")||t.Slug,this.fetchStatsByCountry(this.selectedCountry));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCountries",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(S.n)((function(){t.loading=!0})),e.next=3,N.countries();case 3:this.countries=e.sent,Object(S.n)((function(){t.loading=!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.loading?f.a.createElement("div",{className:"overlay"},f.a.createElement("div",{className:"loader"},"Loading...")):f.a.createElement("div",{className:"App"},f.a.createElement("select",{className:"App__select_country",value:this.selectedCountry,onChange:this.onSelectCountry},this.countries.map((function(e){return f.a.createElement("option",{value:e.Slug,key:e.Country},e.Country)}))),f.a.createElement("div",{className:"App__main"},f.a.createElement("div",{className:"App__content"},this.casesByCountry.slice().reverse().map((function(e){return f.a.createElement("div",{key:e.Date,className:"App__active_case"},f.a.createElement("div",null,f.a.createElement("p",{className:"date"},x()(e.Date).format("DD MMMM"))),f.a.createElement("div",null,f.a.createElement("div",{className:"block"},f.a.createElement("p",{className:"section"},f.a.createElement("b",null,"Active"),f.a.createElement("span",null,e.Active)),f.a.createElement("p",{className:"section"},f.a.createElement("b",null,"Deaths"),f.a.createElement("span",null,e.Deaths))),f.a.createElement("div",{className:"block"},f.a.createElement("p",{className:"section"},f.a.createElement("b",null,"Confirmed"),f.a.createElement("span",null,e.Confirmed)),f.a.createElement("p",{className:"section"},f.a.createElement("b",null,"Recovered"),f.a.createElement("span",null,e.Recovered)))))})),this.isFetchingStats&&f.a.createElement("div",{className:"loader"},"Loading..."),!this.casesByCountry.length&&f.a.createElement("h3",{className:"no_data"},"No cases! Hooray!")),f.a.createElement("div",{className:"total"},f.a.createElement("p",{className:"title"},"Top recovered cases"),f.a.createElement("h1",{className:"count"},this.mostRecoveredCase.count),f.a.createElement("hr",null),f.a.createElement("h1",null,this.mostRecoveredCase.date))))}},{key:"mostRecoveredCase",get:function(){if(!this.casesByCountry.length)return{count:0,date:""};var e=Math.max.apply(Math,Object(d.a)(this.casesByCountry.map((function(e){return e.Recovered})))),t=this.casesByCountry.find((function(t){return t.Recovered===e}));return{count:e,date:t?x()(t.Date).format("DD MMMM"):""}}}]),n}(f.a.Component),c=Object(k.a)(r.prototype,"countries",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(k.a)(r.prototype,"selectedCountry",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=Object(k.a)(r.prototype,"casesByCountry",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(k.a)(r.prototype,"loading",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(k.a)(r.prototype,"isFetchingStats",[S.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=Object(k.a)(r.prototype,"onSelectCountry",[S.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.persist(),e.selectedCountry=t.target.value,e.fetchStatsByCountry(e.selectedCountry)}}}),a=r))||a;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(f.a.createElement(f.a.StrictMode,null,f.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.e481466f.chunk.js.map