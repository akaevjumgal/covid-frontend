(this["webpackJsonpcovid-frontend"]=this["webpackJsonpcovid-frontend"]||[]).push([[0],{19:function(e,t,n){e.exports=n(30)},24:function(e,t,n){},27:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a,r,c,o,s,i,u,l,m=n(0),f=n.n(m),p=n(14),h=n.n(p),d=(n(24),n(11)),v=n(16),y=n(3),b=n.n(y),g=n(5),j=n(6),O=n(9),C=n(10),w=n(4),E=n(18),N=n(17),k=n(7),S=(n(26),n(27),new(function(){function e(){Object(O.a)(this,e),this.path="https://api.covid19api.com"}return Object(C.a)(e,[{key:"countries",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.path,"/countries"),{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"activeCases",value:function(){var e=Object(g.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.path,"/country/").concat(t,"?from=").concat(n.from,"&to=").concat(n.to),{method:"get"});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}())),M=n(1),D=n(15),x=n(8),_=n.n(x),B=Object(D.a)((r=function(e){Object(E.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,r=new Array(a),m=0;m<a;m++)r[m]=arguments[m];return e=t.call.apply(t,[this].concat(r)),Object(j.a)(e,"countries",c,Object(w.a)(e)),Object(j.a)(e,"selectedCountry",o,Object(w.a)(e)),Object(j.a)(e,"casesByCountry",s,Object(w.a)(e)),Object(j.a)(e,"loading",i,Object(w.a)(e)),Object(j.a)(e,"isFetchingStats",u,Object(w.a)(e)),e.setDocumentTitle=function(e){document.title="Stats for ".concat(e)},e.fetchStatsByCountry=function(){var t=Object(g.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(M.n)((function(){e.isFetchingStats=!0})),a={from:_()().utc().subtract(5,"day").format("YYYY-MM-DDT[00:00:00Z]"),to:_()().utc().format("YYYY-MM-DDT[00:00:00Z]")},t.next=4,S.activeCases(n,a);case 4:e.casesByCountry=t.sent,e.setDocumentTitle(e.selectedCountry),window.localStorage.setItem("country",e.selectedCountry),Object(M.n)((function(){e.isFetchingStats=!1}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Object(j.a)(e,"onSelectCountry",l,Object(w.a)(e)),e}return Object(C.a)(n,[{key:"componentDidMount",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCountries();case 2:(t=this.countries.find((function(e){return"kyrgyzstan"===e.Slug})))&&(this.selectedCountry=window.localStorage.getItem("country")||t.Slug,this.fetchStatsByCountry(this.selectedCountry));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCountries",value:function(){var e=Object(g.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(M.n)((function(){t.loading=!0})),e.next=3,S.countries();case 3:this.countries=e.sent,Object(M.n)((function(){t.loading=!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.loading?f.a.createElement("div",{className:"overlay"},f.a.createElement("div",{className:"loader"},"Loading...")):f.a.createElement("div",{className:"App"},f.a.createElement("select",{className:"App__select_country",value:this.selectedCountry,onChange:this.onSelectCountry},this.countries.map((function(e){return f.a.createElement("option",{value:e.Slug,key:e.Country},e.Country)}))),f.a.createElement("div",{className:"App__main"},f.a.createElement("div",{className:"App__content"},this.aggregated.map((function(e,t){return f.a.createElement("div",{key:t,className:"App__active_case"},f.a.createElement("div",null,f.a.createElement("p",{className:"date"},_()(e.Date).format("DD MMMM"))),f.a.createElement("div",null,f.a.createElement("div",{className:"block"},f.a.createElement("p",{className:"section"},"New",f.a.createElement("span",null,e.New)),f.a.createElement("p",{className:"section"},"Active",f.a.createElement("span",null,e.Active)),f.a.createElement("p",{className:"section"},"Deaths",f.a.createElement("span",null,e.Deaths))),f.a.createElement("div",{className:"block"},f.a.createElement("p",{className:"section"},"Confirmed",f.a.createElement("span",null,e.Confirmed)),f.a.createElement("p",{className:"section"},"Recovered",f.a.createElement("span",null,e.Recovered)))))})),this.isFetchingStats&&f.a.createElement("div",{className:"loader"},"Loading..."),!this.casesByCountry.length&&f.a.createElement("h3",{className:"no_data"},"No cases! Hooray!")),f.a.createElement("div",{className:"total"},f.a.createElement("p",{className:"title"},"Top recovered cases"),f.a.createElement("h1",{className:"count"},this.mostRecoveredCase.count),f.a.createElement("hr",null),f.a.createElement("h1",null,this.mostRecoveredCase.date))))}},{key:"mostRecoveredCase",get:function(){var e=this.aggregated;if(!e.length)return{count:0,date:""};var t=Math.max.apply(Math,Object(v.a)(e.map((function(e){return e.Recovered})))),n=e.find((function(e){return e.Recovered===t}));return{count:t,date:n?_()(n.Date).format("DD MMMM"):""}}},{key:"aggregated",get:function(){return this.casesByCountry.slice().reverse().reduce((function(e,t,n,a){var r=0;return a[n+1]&&(r=Math.abs(a[n].Confirmed-a[n+1].Confirmed)),e.push(Object(d.a)(Object(d.a)({},t),{},{New:r})),e}),[])}}]),n}(f.a.Component),c=Object(k.a)(r.prototype,"countries",[M.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(k.a)(r.prototype,"selectedCountry",[M.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=Object(k.a)(r.prototype,"casesByCountry",[M.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(k.a)(r.prototype,"loading",[M.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(k.a)(r.prototype,"isFetchingStats",[M.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=Object(k.a)(r.prototype,"onSelectCountry",[M.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.persist(),e.selectedCountry=t.target.value,e.fetchStatsByCountry(e.selectedCountry)}}}),a=r))||a;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.render(f.a.createElement(f.a.StrictMode,null,f.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.17f9129b.chunk.js.map